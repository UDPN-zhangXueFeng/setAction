<app-page-header
  [backTpl]="backTpl"
  [backUrl]="'/sand-box/sand-transaction/transfer'"
  [pageHeaderInfo]="pageHeaderInfo"
></app-page-header>
<ng-template #backTpl>
  <span nz-icon nzType="arrow-left" nzTheme="outline"></span>
</ng-template>
<ng-template #headerExtra>
  <div>
    <div>
      <img class="m-l-5" src="../../../../assets/images/API (1).png" alt="" />
    </div>
  </div>
</ng-template>
<div class="normal-table-wrap">
  <!-- <div class="ctx-titles">
    <nz-breadcrumb>
      <nz-breadcrumb-item>Txn Management</nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a routerLink="/sandBox/transaction/transfer">Transfer</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item class="font-semibold">Info</nz-breadcrumb-item>
    </nz-breadcrumb>
  </div> -->
  <div nz-row class="">
    <div nz-col nzSpan="24" nzOffset="">
      <ng-container *ngIf="!datailStatus">
        <nz-card
          nzTitle="Available Transaction Nodes"
          [nzBordered]="false"
          [nzExtra]=""
        >
          <div class="search-result-list">
            <nz-table #basicTable [nzData]="listOfData">
              <thead>
                <tr>
                  <th>TN Name</th>
                  <th>TN Code</th>
                  <th>Currency Type</th>
                  <th>
                    Amount<span class="text-gray-500">{{
                      '(' + listOfData[0].spliceCurrencyType + ')'
                    }}</span>
                  </th>
                  <th>
                    Estimated Channel Fee<span
                      class="text-gray-500"
                      *ngIf="listOfData[0].channelFee === 1"
                      >{{
                        '(' +
                          listOfData[0].channelCurrency +
                          '-' +
                          listOfData[0].channelPlatform +
                          ')'
                      }}</span
                    >
                  </th>
                  <th>
                    Service Fee<span class="text-gray-500">{{
                      '(' + listOfData[0].spliceCurrencyType + ')'
                    }}</span>
                  </th>
                  <th>
                    Total Amount<span class="text-gray-500">{{
                      '(' + listOfData[0].spliceCurrencyType + ')'
                    }}</span>
                    <span
                      class="m-l-5"
                      nz-tooltip
                      [nzTooltipTitle]="tooltip"
                      [nzTooltipPlacement]="'right'"
                      [nzTooltipColor]="'#3c5686'"
                      ><i
                        nz-icon
                        nzType="question-circle"
                        [nzTheme]="'twotone'"
                      ></i>
                      <ng-template #tooltip>
                        <div class="text-black">
                          It is the sum of Amount, Estimated Channel Fee and
                          Service Fee. The Estimated Channel Fee shall be added
                          after exchange rate conversion.
                        </div>
                      </ng-template></span
                    >
                  </th>
                  <th>IsKYC</th>
                  <th>Action</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of basicTable.data; index as i">
                  <td>{{ data.nodeName }}</td>
                  <td>{{ data.nodeNumber }}</td>
                  <td>{{ data.spliceCurrencyType }}</td>
                  <td>{{ data.transCurrentAmt }}</td>
                  <td>
                    {{
                      listOfData[i].channelFee === 1
                        ? data.estimatedChannelFee
                        : '--'
                    }}
                  </td>
                  <td>{{ data.serviceFee }}</td>
                  <td>{{ data.totalAmount }}</td>
                  <td>{{ data.isKycRequest === 1 ? 'Yes' : 'No' }}</td>
                  <td>
                    <!-- <a>Action ä¸€ {{ data.tnName }}</a>-->
                    <a (click)="onSignture(data)">simulate signing(end-user)</a>
                    <nz-divider nzType="vertical"></nz-divider>
                    <!-- <a (click)="onInfo(data)">Sumbit</a>
                    <nz-divider nzType="vertical"></nz-divider> -->
                    <a (click)="onDetail(data)">Detail</a>
                  </td>
                </tr>
              </tbody>
            </nz-table>
          </div>
        </nz-card>
      </ng-container>
      <ng-container *ngIf="datailStatus">
        <nz-card [nzTitle]="" [nzBordered]="false" [nzExtra]="">
          <div nz-row [nzGutter]="24">
            <div nz-col [nzSpan]="12">
              <nz-descriptions
                nzTitle="Sender Details"
                class="descriptions-info"
              >
                <nz-descriptions-item nzTitle="Business Account" [nzSpan]="3"
                  >{{ infoData.fromBankAccount }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Sender DID" [nzSpan]="3">{{
                  infoData.did
                }}</nz-descriptions-item>
                <nz-descriptions-item nzTitle="Currency type" [nzSpan]="3"
                  >{{ infoData.spliceCurrencyType }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Sender Account" [nzSpan]="3"
                  >{{ infoData.fromAcc }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Amount" [nzSpan]="3"
                  >{{ infoData.transCurrentAmt }}
                  {{
                    infoData.spliceCurrencyType.split('-')[0]
                  }}</nz-descriptions-item
                >
              </nz-descriptions>
            </div>
            <div nz-col [nzSpan]="12">
              <nz-descriptions
                nzTitle="Beneficiary Details"
                class="descriptions-info"
              >
                <nz-descriptions-item nzTitle="Beneficiary Type" [nzSpan]="3"
                  >{{
                    infoData.beneficiaryType === 1
                      ? 'Internal Bank Beneficiary'
                      : 'External Beneficiary'
                  }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Beneficiary Name" [nzSpan]="3"
                  >{{ infoData.beneficiaryName }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Business Account" [nzSpan]="3"
                  >{{ infoData.toBankAccount }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Beneficiary Account" [nzSpan]="3"
                  >{{ infoData.toAcc }}
                </nz-descriptions-item>
                <nz-descriptions-item nzTitle="Amount received" [nzSpan]="3"
                  >{{ infoData.transCurrentAmt }}
                  {{
                    infoData.spliceCurrencyType.split('-')[0]
                  }}</nz-descriptions-item
                >
              </nz-descriptions>
            </div>
          </div>
          <nz-descriptions
            nzTitle="Other information"
            [nzColumn]="2"
            class="descriptions-info"
          >
            <nz-descriptions-item nzTitle="TN Name">{{
              infoData.nodeName
            }}</nz-descriptions-item>
            <nz-descriptions-item nzTitle="TN Code">{{
              infoData.nodeNumber
            }}</nz-descriptions-item>
            <nz-descriptions-item
              nzTitle="Estimated Channel Fee"
              *ngIf="infoData.channelFee === 1"
              >{{
                infoData.estimatedChannelFee + infoData.channelCurrency
              }}</nz-descriptions-item
            >
            <nz-descriptions-item
              nzTitle="Max Channel Fee"
              *ngIf="infoData.allowMaxChannelFee === 1"
              >{{
                infoData.maxChannelFee === null
                  ? '--'
                  : infoData.maxChannelFee + infoData.channelCurrency
              }}</nz-descriptions-item
            >
            <nz-descriptions-item nzTitle="Gas"
              >{{ '0' }}
            </nz-descriptions-item>
            <nz-descriptions-item nzTitle="Service fee"
              >{{ infoData.serviceFee }}
              {{ infoData.spliceCurrencyType.split('-')[0] }}
            </nz-descriptions-item>
            <nz-descriptions-item nzTitle="Total Amount"
              >{{ infoData.totalAmount }}
              {{ infoData.spliceCurrencyType.split('-')[0] }}
            </nz-descriptions-item>
            <nz-descriptions-item nzTitle="IsKYC"
              >{{ infoData.isKycRequest === 1 ? 'Yes' : 'No' }}
            </nz-descriptions-item>
          </nz-descriptions>
          <div class="back">
            <button nz-button nzType="primary" (click)="onBack()">Back</button>
          </div>
        </nz-card>
      </ng-container>
    </div>
  </div>
</div>
<!-- <ng-template #extraTemplate>
  <a class="dc-img">
    <img src="../../../../assets/images/API (1).png" alt="" />
  </a>
</ng-template> -->
