<app-page-header [pageHeaderInfo]="pageHeaderInfo"></app-page-header>
<ng-template #headerExtra>
  <div>
    <div>
      <img src="../../../../assets/images/WEB.png" alt="" />
      <img class="m-l-20" src="../../../../assets/images/API (1).png" alt="" />
    </div>
  </div>
</ng-template>
<div class="normal-table-wrap m-vn">
  <nz-card
    [nzBodyStyle]="{ 'padding-bottom': 0 }"
    [nzTitle]="'Txns Query'"
    class="m-b-40"
    [nzBordered]="false"
  >
    <form nz-form nzLayout="vertical">
      <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24 }">
        <div
          nz-col
          [nzXXl]="6"
          [nzXl]="8"
          [nzLg]="12"
          [nzMd]="12"
          [nzSm]="24"
          [nzXs]="24"
        >
          <nz-form-item>
            <nz-form-label>BN Name</nz-form-label>
            <nz-form-control>
              <input
                nz-input
                placeholder="BN Name"
                name="instance"
                [(ngModel)]="searchParam.instance"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div
          nz-col
          [nzXXl]="6"
          [nzXl]="8"
          [nzLg]="12"
          [nzMd]="12"
          [nzSm]="24"
          [nzXs]="24"
        >
          <nz-form-item>
            <nz-form-label>DID</nz-form-label>
            <nz-form-control>
              <input
                nz-input
                placeholder="DID"
                name="did"
                [(ngModel)]="searchParam.did"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <div
          nz-col
          [nzXXl]="6"
          [nzXl]="8"
          [nzLg]="12"
          [nzMd]="12"
          [nzSm]="24"
          [nzXs]="24"
        >
          <nz-form-item>
            <nz-form-label>Txn Key </nz-form-label>
            <nz-form-control>
              <input
                nz-input
                placeholder="Txn Key"
                name="transactionKey"
                [(ngModel)]="searchParam.transactionKey"
              />
            </nz-form-control>
          </nz-form-item>
        </div>

        <ng-container *ngIf="!isCollapse">
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Txn Type </nz-form-label>
              <nz-form-control>
                <nz-select
                  nzPlaceHolder="Txn Type"
                  name="transactionType"
                  [(ngModel)]="searchParam.transactionType"
                >
                  <nz-option nzValue="" nzLabel="All"></nz-option>
                  <nz-option nzValue="Transfer" nzLabel="Transfer"></nz-option>
                  <nz-option nzValue="Swap" nzLabel="Swap"></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Source Currency </nz-form-label>
              <nz-form-control>
                <nz-select
                  nzPlaceHolder="Source Currency"
                  name="fromCurrencyType"
                  [(ngModel)]="searchParam.fromCurrencyType"
                >
                  <nz-option nzValue="" nzLabel="All"></nz-option>
                  <nz-option
                    *ngFor="let item of curryArrList"
                    [nzValue]="item.currencyName"
                    [nzLabel]="item.currencyName"
                  >
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Source PlatformType </nz-form-label>
              <nz-form-control>
                <nz-select
                  nzPlaceHolder="Source PlatformType"
                  name="fromPlatformType"
                  [(ngModel)]="searchParam.fromPlatformType"
                >
                  <nz-option nzValue="" nzLabel="All"></nz-option>
                  <nz-option
                    *ngFor="let item of platfromArrList"
                    [nzValue]="item.platformName"
                    [nzLabel]="item.platformName"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Target Currency </nz-form-label>
              <nz-form-control>
                <nz-select
                  nzPlaceHolder="Target Currency"
                  name="toCurrencyType"
                  [(ngModel)]="searchParam.toCurrencyType"
                >
                  <nz-option nzValue="" nzLabel="All"></nz-option>
                  <nz-option
                    *ngFor="let item of curryArrList"
                    [nzValue]="item.currencyName"
                    [nzLabel]="item.currencyName"
                  >
                  </nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Target PlatformType </nz-form-label>
              <nz-form-control>
                <nz-select
                  nzPlaceHolder="Target PlatformType"
                  name="toPlatformType"
                  [(ngModel)]="searchParam.toPlatformType"
                >
                  <nz-option nzValue="" nzLabel="All"></nz-option>
                  <nz-option
                    *ngFor="let item of platfromArrList"
                    [nzValue]="item.platformName"
                    [nzLabel]="item.platformName"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Submission Date</nz-form-label>
              <nz-form-control>
                <nz-range-picker
                  [nzShowTime]="true"
                  style="width: 100%"
                  name="createTime"
                  [(ngModel)]="searchParam.createTime"
                ></nz-range-picker>
              </nz-form-control>
            </nz-form-item>
          </div>
          <div
            nz-col
            [nzXXl]="6"
            [nzXl]="8"
            [nzLg]="12"
            [nzMd]="12"
            [nzSm]="24"
            [nzXs]="24"
          >
            <nz-form-item>
              <nz-form-label>Status </nz-form-label>
              <nz-form-control>
                <nz-select
                  nzPlaceHolder="Status"
                  name="status"
                  [(ngModel)]="searchParam.status"
                >
                  <nz-option nzValue="" nzLabel="All"></nz-option>
                  <nz-option nzValue="1" nzLabel="Pending"></nz-option>
                  <nz-option nzValue="2" nzLabel="TN1 processing"></nz-option>
                  <nz-option
                    nzValue="3"
                    nzLabel="TN1 processed successfully"
                  ></nz-option>
                  <nz-option nzValue="4" nzLabel="TN1 failed"></nz-option>
                  <nz-option nzValue="5" nzLabel="TN2 processing"></nz-option>
                  <nz-option
                    nzValue="6"
                    nzLabel="TN2 processed successfully"
                  ></nz-option>
                  <nz-option nzValue="7" nzLabel="TN2 failed"></nz-option>
                  <nz-option nzValue="8" nzLabel="Refunding"></nz-option>
                  <nz-option
                    nzValue="9"
                    nzLabel="Refund successfully"
                  ></nz-option>
                  <nz-option nzValue="10" nzLabel="Refund failed"></nz-option>
                  <nz-option
                    nzValue="11"
                    nzLabel="Revoke successfully"
                  ></nz-option>
                </nz-select>
              </nz-form-control>
            </nz-form-item>
          </div>
        </ng-container>
        <div
          nz-col
          [nzXXl]="isCollapse ? 6 : 12"
          [nzXl]="isCollapse ? 24 : 16"
          [nzLg]="isCollapse ? 12 : 24"
          [nzMd]="isCollapse ? 12 : 24"
          [nzSm]="24"
          [nzXs]="24"
          class="text-right"
        >
          <nz-form-item>
            <nz-form-label [nzNoColon]="true"></nz-form-label>
            <nz-form-control>
              <div nz-col [nzSpan]="24">
                <button nz-button [nzType]="'primary'" (click)="getDataList()">
                  Query
                </button>
                <a nz-button nzType="link" class="m-l-15" (click)="resetForm()"
                  >Reset</a
                >
                <a class="operate-text" (click)="toggleCollapse()">
                  <span *ngIf="isCollapse">open</span>
                  <span *ngIf="!isCollapse">hide</span>
                  <i nz-icon [nzType]="isCollapse ? 'down' : 'up'"></i>
                </a>
              </div>
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>
    </form>
  </nz-card>
  <app-card-table-wrap
    [tableTitle]="'Txns List'"
    [isNormalTable]="true"
    (reload)="reloadTable()"
  >
    <app-ant-table
      (selectedChange)="selectedChecked($event)"
      (changePageSize)="changePageSize($event)"
      (changePageNum)="getDataList($event)"
      [tableConfig]="tableConfig"
      [tableData]="dataList"
    ></app-ant-table>
    <ng-template #operationTpl let-transactionType="transactionType" let-transactionKey="transactionKey">
      <span
        class="operate-text"
        routerLink="/vn/vnNode/info"
        [queryParams]="{
          transactionType: transactionType,
          transactionKey: transactionKey
        }"
        >Detail</span
      >
    </ng-template>
  </app-card-table-wrap>
</div>
